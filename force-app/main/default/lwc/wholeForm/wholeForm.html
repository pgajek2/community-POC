<template>
    <span> Submitter Contact Information</span>
    <lightning-record-edit-form object-api-name="cf_PropertyUser__c" onsuccess={handleSuccess}>
        <lightning-messages>
        </lightning-messages>
        <template for:each={main_info} for:item="field" class="slds-grid slds-gutters">
            <div class="slds-col slds-size_1-of-2" key={field}>
                <lightning-input-field field-name={field} onchange={handleChange}></lightning-input-field>
            </div>
        </template>


        <lightning-accordion allow-multiple-sections-open class="example-accordion slds-grid slds-gutters"
            onsectiontoggle={handleToggleSection} active-section-name={activeSections}>

            <template class="slds-col slds-size_1-of-2" for:each={fields_per_section} for:item="accordion_item">
                <lightning-accordion-section key={accordion_item.label} name={accordion_item.label}
                    label={accordion_item.label}>
                    <!-- <lightning-record-edit-form object-api-name="cf_PropertyUser__c"> -->
                    <template for:each={accordion_item.subSections} for:item="subSection">
                        <div key={subSection.sublabel}>
                            {subSection.sublabel}
                            <template for:each={subSection.fields} for:item="fieldFromSubsection">
                                <lightning-input-field key={fieldFromSubsection} field-name={fieldFromSubsection}>
                                </lightning-input-field>
                            </template>
                            <br>
                        </div>
                    </template>
                    <!-- </lightning-record-edit-form> -->
                </lightning-accordion-section>
            </template>
        </lightning-accordion>

        <div class="slds-align_absolute-center">
            <lightning-button label="Cancel" title="Cancel" onclick={handleCancel} class="slds-m-left_x-small">
            </lightning-button>
            <lightning-button type="submit"  variant="brand" label="Save" title="Save" class="slds-m-left_x-small">
            </lightning-button>
        </div>
    </lightning-record-edit-form>
</template>